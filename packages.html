<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Boneless Hosts</title>

<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />

<style>
@import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap');
body { font-family: 'Open Sans', sans-serif; }
</style>
</head>

<body class="bg-gray-900 text-white">

<!-- NAVBAR -->
<nav class="bg-black/60 py-3">
  <div class="container mx-auto px-4 flex justify-between items-center">
    
    <a href="#" class="flex items-center gap-3">
      <img src="logo.png" class="h-10 w-10 rounded-full object-cover" />
      <span class="font-semibold text-lg">Boneless</span>
    </a>

    <!-- REGION BUTTONS -->
    <div class="flex gap-2">
      <button id="asiaBtn" onclick="setRegion('asia')" class="px-4 py-1 rounded bg-blue-500 text-sm">
        Asia
      </button>
      <button id="euBtn" onclick="setRegion('eu')" class="px-4 py-1 rounded bg-gray-700 text-gray-300 text-sm">
        Europe
      </button>
    </div>

  </div>
</nav>

<!-- HEADER -->
<header class="bg-cover bg-center"
style="background-image:url('https://www.pixelstalk.net/wp-content/uploads/images6/Minecraft-Aesthetic-Wallpaper-HD-Free-download.jpg')">
<div class="bg-black/60">
<div class="container mx-auto px-4 py-24 text-center">
<h1 class="text-4xl font-bold">اختيار الباقة</h1>
<p class="text-lg mt-4 text-gray-300">اختر الباقة المناسبة لسيرفر ماين كرافت</p>
</div>
</div>
</header>

<!-- PLANS -->
<section class="container mx-auto px-4 py-16">
<div id="plans" class="grid grid-cols-1 md:grid-cols-3 gap-8"></div>
</section>

<!-- CONFIRM MODAL -->
<div id="confirmModal" class="fixed inset-0 bg-black/70 hidden items-center justify-center z-50">
  <div class="bg-gray-800 rounded-lg p-6 w-full max-w-md border border-white/10">
    <h2 class="text-2xl font-bold mb-4 text-center">هل أنت متأكد؟</h2>

    <div id="planNotes" class="text-gray-300 text-sm mb-6"></div>

    <div class="flex justify-center gap-4">
      <button onclick="confirmYes()" class="bg-blue-500 px-6 py-2 rounded hover:bg-blue-600">
        نعم
      </button>
      <button onclick="closeConfirm()" class="bg-gray-600 px-6 py-2 rounded hover:bg-gray-700">
        لا
      </button>
    </div>
  </div>
</div>

<script>
let selectedPlan = "";

const plansData = {
  asia: [
    { name: "Starter", price: "$7.10", ram: "4GB", cpu: "250% CPU (2.5vCores)", storage: "16GB NVMe", slots: "10" },
    { name: "Basic", price: "$10", ram: "6GB", cpu: "325% CPU (3.25vCores)", storage: "24GB NVMe", slots: "15" },
    { name: "Master", price: "$13.63", ram: "8GB", cpu: "450% CPU (4.5vCores)", storage: "32GB NVMe", slots: "35" },
    { name: "Extreme", price: "$16.30", ram: "12GB", cpu: "550% CPU (5.5vCores)", storage: "48GB NVMe", slots: "60" },
    { name: "Boneless", price: "$23.25", ram: "16GB", cpu: "690% CPU (6.9vCores)", storage: "64GB NVMe", slots: "100" }
  ],
  eu: [
    // X plans
    { name: "X Starter", price: "$7.10", ram: "8GB", cpu: " Xeon E5-2680 v4 3.30 GHz", storage: "16GB NVMe", slots: "15" },
    { name: "X Basic", price: "$12.15", ram: "12GB", cpu: " Xeon E5-2680 v4 3.30 GHz", storage: "24GB NVMe", slots: "25" },
    { name: "X Master", price: "$14.20", ram: "16GB", cpu: " Xeon E5-2680 v4 3.30 GHz", storage: "32GB NVMe", slots: "40" },
    { name: "X Extreme", price: "$20.20", ram: "24GB", cpu: " Xeon E5-2680 v4 3.30 GHz", storage: "48GB NVMe", slots: "70" },
    { name: "X Boneless", price: "$25.20", ram: "32GB", cpu: " Xeon E5-2680 v4 3.30 GHz", storage: "56GB NVMe", slots: "120" },
    // R plans
    { name: "R Starter", price: "$7.10", ram: "3GB", cpu: "2 vCores", storage: "30GB NVMe", slots: "15" },
    { name: "R Basic", price: "$10", ram: "5GB", cpu: "3 vCores", storage: "50GB NVMe", slots: "25" },
    { name: "R Master", price: "$13.33", ram: "8GB", cpu: "5 vCores", storage: "80GB NVMe", slots: "40" },
    { name: "R Extreme", price: "$20", ram: "12GB", cpu: "7 vCores", storage: "120GB NVMe", slots: "70" },
    { name: "R Boneless", price: "$24.70", ram: "18GB", cpu: "9 vCores", storage: "180GB NVMe", slots: "120" }
  ]
};

function setRegion(region) {
  const asiaBtn = document.getElementById("asiaBtn");
  const euBtn = document.getElementById("euBtn");

  asiaBtn.className = region === "asia"
    ? "px-4 py-1 rounded bg-blue-500 text-sm"
    : "px-4 py-1 rounded bg-gray-700 text-gray-300 text-sm";

  euBtn.className = region === "eu"
    ? "px-4 py-1 rounded bg-blue-500 text-sm"
    : "px-4 py-1 rounded bg-gray-700 text-gray-300 text-sm";

  const container = document.getElementById("plans");
  container.innerHTML = "";

  plansData[region].forEach(plan => {
    // Check if plan is pending in localStorage
    const pendingPlan = localStorage.getItem("pendingPlan");
    const isPending = pendingPlan === plan.name;

    container.innerHTML += `
    <div class="bg-gray-800 rounded-lg p-6 text-center border border-white/10">
      <h3 class="text-2xl font-bold mb-4">${plan.name}</h3>
      <p class="text-4xl font-bold mb-4">${plan.price}</p>

      <ul class="text-gray-300 text-sm mb-6 space-y-2 text-left">
        <li><i class="fas fa-memory text-blue-400 mr-2"></i>RAM: ${plan.ram}</li>
        <li><i class="fas fa-microchip text-blue-400 mr-2"></i>CPU: ${plan.cpu}</li>
        <li><i class="fas fa-hdd text-blue-400 mr-2"></i>Storage: ${plan.storage}</li>
        <li><i class="fas fa-users text-blue-400 mr-2"></i>Slots: ${plan.slots}</li>
      </ul>

      <button
        data-plan="${plan.name}"
        class="order-btn px-6 py-3 rounded transition ${
          isPending ? "bg-yellow-500 cursor-not-allowed" : "bg-blue-500 hover:bg-blue-600"
        }"
        ${isPending ? "disabled" : ""}
        onclick="openConfirm('${plan.name}')"
      >
        ${isPending ? "قيد انتظار قبول طلبك" : "طلب الباقة"}
      </button>
    </div>`;
  });
}

function openConfirm(plan) {
  selectedPlan = plan;
  const planNotes = document.getElementById("planNotes");
  planNotes.innerHTML = `
  <strong>الملاحظات قبل الطلب على الباقة:</strong>
  <ol class="list-decimal list-inside mt-2 space-y-2">
    <li>أول ما تشتري الباقة بياخذ وقت عشان يجيك السيرفر لمدة شهر في الإيميل حقك</li>
    <li>مافي ترجيع، يعني يوم تاخذ الباقة وتغير رأيك ما نقدر نرجعها</li>
    <li>إن شاء الله تعجبك الباقة مع كل تحياتنا</li>
  </ol>`;
  const confirmModal = document.getElementById("confirmModal");
  confirmModal.classList.remove("hidden");
  confirmModal.classList.add("flex");
}

function closeConfirm() {
  const confirmModal = document.getElementById("confirmModal");
  confirmModal.classList.add("hidden");
  confirmModal.classList.remove("flex");
}

function confirmYes() {
  closeConfirm();

  // حفظ الطلب في localStorage
  localStorage.setItem("pendingPlan", selectedPlan);

  // تحديث زر الباقة ليصبح معطل وأصفر
  const btn = document.querySelector(`button.order-btn[data-plan="${selectedPlan}"]`);
  if (btn) {
    btn.innerText = "قيد انتظار قبول طلبك";
    btn.classList.remove("bg-blue-500", "hover:bg-blue-600");
    btn.classList.add("bg-yellow-500", "cursor-not-allowed");
    btn.disabled = true;
  }

  alert("تم تأكيد طلب: " + selectedPlan);
}

// عند تحميل الصفحة، إذا فيه طلب معلق، نعيد عرض الحالة مع تعطيل الزر المناسب
window.onload = () => {
  const pending = localStorage.getItem("pendingPlan");
  if (pending) {
    // تحديد المنطقة حسب الباقة
    if(pending.startsWith('X') || pending.startsWith('R')){
      setRegion('eu');
    } else {
      setRegion('asia');
    }

    // تعطيل الزر بعد بناء الباقات بفاصل صغير
    setTimeout(() => {
      const btn = document.querySelector(`button.order-btn[data-plan="${pending}"]`);
      if (btn) {
        btn.innerText = "قيد انتظار قبول طلبك";
        btn.classList.remove("bg-blue-500", "hover:bg-blue-600");
        btn.classList.add("bg-yellow-500", "cursor-not-allowed");
        btn.disabled = true;
      }
    }, 50);
  } else {
    setRegion("asia");
  }
};
</script>

</body>
</html>
